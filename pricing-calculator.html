<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>비즈톡 비즈메시지 요금제 계산기</title>
  <style>
    :root {
      --bg: #ffffff;
      --fg: #1f2937;
      --muted: #6b7280;
      --border: #e5e7eb;
      --card: #f9fafb;
      --accent-bg: #ecfdf5;
      --accent-fg: #064e3b;
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0; padding: 0; background: var(--bg); color: var(--fg);
      font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR",
                   system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    .wrap { max-width: 920px; margin: 24px auto; padding: 0 16px 40px; }
    .header { display: flex; align-items: center; gap: 12px; }
    .header img { height: 28px; width: auto; }
    .title { display: flex; flex-direction: column; }
    .title h1 { font-size: 22px; margin: 0; }
    .title .desc { margin: 4px 0 0; color: var(--muted); font-size: 14px; }

    /* 좌측/우측 카드 로우 정렬(2열) */
    .grid { display: grid; grid-template-columns: 1fr; gap: 12px; margin-top: 12px; }
    @media (min-width: 720px){ .grid { grid-template-columns: 1.3fr 1fr; } }

    .card {
      background: var(--card); border: 1px solid var(--border);
      border-radius: 12px; padding: 16px;
      display: flex; flex-direction: column; gap: 12px; /* 카드 내부도 로우 정렬 */
    }
    .card h2 { font-size: 18px; margin: 0; }

    label { font-size: 13px; color: var(--muted); margin-bottom: 6px; display: inline-block; }
    select, input[type="number"], input[type="text"] {
      width: 100%; padding: 10px 12px; border: 1px solid var(--border);
      border-radius: 10px; font-size: 15px; background: #fff; color: var(--fg);
    }

    /* 한 줄에 2개(볼륨/부가세) */
    .row-inline { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .row-col { display: flex; flex-direction: column; }
    @media (max-width: 520px){ .row-inline { grid-template-columns: 1fr; } }

    .checkbox-group { display: flex; gap: 16px; flex-wrap: wrap; }
    .checkbox-group label { color: var(--fg); font-size: 14px; margin: 0; }

    .help { margin-top: -4px; padding: 10px 12px; border: 1px solid var(--border);
            border-radius: 10px; background: #fff; display: none; }
    .help strong { color: var(--accent-fg); }

    .kpi { display: grid; grid-template-columns: 1fr; gap: 10px; }
    .k { background: #fff; border: 1px solid var(--border); border-radius: 10px; padding: 12px; text-align: center; }
    .k .v { font-weight: 700; font-size: 18px; margin-bottom: 2px; }
    .k .t { font-size: 12px; color: var(--muted); }

    table { width: 100%; border-collapse: collapse; }
    th, td { text-align: right; padding: 10px 8px; border-bottom: 1px solid var(--border); font-variant-numeric: tabular-nums; }
    th:first-child, td:first-child { text-align: left; }
    thead th { font-size: 12px; color: var(--muted); font-weight: 600; }
    tbody tr.best { background: var(--accent-bg); }
    .pill { display: inline-block; padding: 2px 8px; font-size: 12px; border-radius: 999px; background: #e5edff; color: #1e40af; border: 1px solid #c7d2fe; }

    .footer { margin-top: 10px; font-size: 12px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <img alt="Biztalk" src="https://www.biztalk.co.kr/newhome/assets/img/logo/logo.svg">
      <div class="title">
        <h1>비즈톡 비즈메시지 요금제 계산기</h1>
        <p class="desc">알림톡 예상 발송 건수를 입력하면 맞춤 요금제를 추천해드립니다.</p>
      </div>
    </div>

    <div class="grid">
      <!-- 입력 카드 (요금제 선택 UI 없음 / 카드 내부 로우 정렬) -->
      <div class="card">
        <h2>알림톡 예상 발송 건수</h2>

        <!-- 발송건수(좌) + 부가세(우) 한 줄 -->
        <div class="row-inline">
          <div class="row-col">
            <label for="volume">예상 발송 건수 (월)</label>
            <input id="volume" type="number" min="0" step="1" value="10000" />
          </div>
          <div class="row-col">
            <label>부가세(10%)</label>
            <input type="text" value="별도(미포함)" disabled />
          </div>
        </div>

        <!-- 체크박스(.card 내부) -->
        <div class="checkbox-group">
          <label><input type="checkbox" id="useChatbot"> 챗봇 사용</label>
          <label><input type="checkbox" id="useBizting"> 비즈팅 광고 메시지 사용</label>
        </div>

        <!-- 도움말(체크 시 표시) -->
        <div id="helperChatbot" class="help">
          <strong>챗봇</strong><br />
          챗봇은 운영하는 카카오톡 채널에서 고객이 문의를 셀프 처리할 수 있도록 돕는 서비스입니다.
        </div>
        <div id="helperBizting" class="help">
          <strong>비즈팅</strong><br />
          비즈팅은 통신사, 카드사 및 포인트사 고객을 대상으로 정밀한 타겟 조건을 설정하여,
          내 고객이 아닌 잠재 고객에게 마케팅 메시지를 발송할 수 있는 프리미엄 메시지 마케팅 서비스입니다.
        </div>
      </div>

      <!-- 요금제 정책 카드 -->
      <div class="card">
        <h2>요금제</h2>
        <table>
          <thead>
            <tr>
              <th>요금제</th>
              <th>월 기본료</th>
              <th>알림톡 무료건수</th>
              <th>건당 단가</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>스타터</td><td>10,000원</td><td>0</td><td>8원</td></tr>
            <tr><td>스탠다드</td><td>49,000원</td><td>7,000</td><td>7원</td></tr>
            <tr><td>프리미엄</td><td>99,000원</td><td>15,000</td><td>6원</td></tr>
            <tr><td>울트라</td><td>150,000원</td><td>0</td><td>5원</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- 결과 카드 -->
    <div class="card" style="margin-top:12px;">
      <h2>추천 요금제</h2>
      <div class="kpi" id="kpi">
        <div class="k"><div class="v" id="k_total">-</div><div class="t">추천 요금제 총 비용(부가세 별도)</div></div>
      </div>
      <div class="footer">추천 요금제에는 <span class="pill">BEST</span>가 표시됩니다.</div>
      <div style="overflow-x:auto;">
        <table id="cmp">
          <thead>
            <tr>
              <th>요금제</th>
              <th>총 비용</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div class="footer">본 계산기는 안내용이며 실제 청구 금액은 계약 및 정책에 따라 상이할 수 있습니다.</div>
  </div>

  <script>
    // 요금제 정의
    const plans = {
      basic:   { name: "스타터",     monthly: 10000, free: 0,     unit: 8 },
      flat:    { name: "스탠다드",   monthly: 49000, free: 7000,  unit: 7 },
      premium: { name: "프리미엄", monthly: 99000, free: 15000, unit: 6 },
      ultra:   { name: "울트라",   monthly: 150000,free: 0,     unit: 5 }
    };

    const el = (id) => document.getElementById(id);
    const fmt = (n) => n.toLocaleString('ko-KR');

    function computeForPlan(planKey, volume) {
      const p = plans[planKey];
      const billable = Math.max(0, volume - p.free);
      const subtotal = p.monthly + billable * p.unit; // VAT 제외
      return { key: planKey, name: p.name, subtotal, billable };
    }

    function recompute() {
      const volume  = Math.max(0, parseInt(el("volume").value || "0", 10));
      const useChatbot = el("useChatbot").checked;
      const useBizting = el("useBizting").checked;

      // 도움말 토글 (.card 내부)
      el("helperChatbot").style.display = useChatbot ? "block" : "none";
      el("helperBizting").style.display = useBizting ? "block" : "none";

      // 요금제별 계산
      const results = Object.keys(plans).map(k => computeForPlan(k, volume));

      // 추천 로직: 챗봇/비즈팅 사용 시 울트라 BEST, 아니면 최소 비용 BEST
      let bestPlanKey;
      if (useChatbot || useBizting) {
        bestPlanKey = "ultra";
      } else {
        bestPlanKey = results.reduce((min, r) => r.subtotal < min.subtotal ? r : min, results[0]).key;
      }

      // 결과 테이블
      const tbody = document.querySelector("#cmp tbody");
      tbody.innerHTML = "";
      results.sort((a,b)=>a.subtotal-b.subtotal).forEach((r) => {
        const tr = document.createElement("tr");
        if (r.key === bestPlanKey) tr.classList.add("best");
        tr.innerHTML = `
          <td>${r.name}${r.key===bestPlanKey? ' <span class="pill">BEST</span>':''}</td>
          <td>${fmt(r.subtotal)}원</td>
        `;
        tbody.appendChild(tr);
      });

      // KPI는 추천 요금제 기준
      const best = results.find(r => r.key === bestPlanKey);
      el("k_total").textContent = best ? (fmt(best.subtotal) + "원") : "-";
    }

    ["volume","useChatbot","useBizting"].forEach(id => {
      el(id).addEventListener("input", recompute);
      el(id).addEventListener("change", recompute);
    });
    window.addEventListener("DOMContentLoaded", recompute);
  </script>
</body>
</html>
