<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>비즈톡 비즈메시지 비용 계산기</title>
  <style>
    :root {
      --bg: #ffffff;
      --fg: #1f2937;
      --muted: #6b7280;
      --accent: #3b82f6;
      --border: #e5e7eb;
      --card: #f9fafb;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; background: var(--bg); color: var(--fg); font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR", system-ui, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    .wrap { max-width: 920px; margin: 24px auto; padding: 0 16px 40px; }
    .header { display: flex; align-items: center; gap: 12px; }
    .header img { height: 28px; width: auto; }
    .title { display: flex; flex-direction: column; }
    .title h1 { font-size: 22px; margin: 0; }
    .title .desc { margin: 4px 0 0; color: var(--muted); font-size: 14px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 12px; margin-top: 12px; }
    @media (min-width: 720px){ .grid { grid-template-columns: 1.3fr 1fr; } }
    .card { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 16px; }
    .card h2 { font-size: 18px; margin: 0 0 8px; }
    label { display: block; font-size: 13px; color: var(--muted); margin-bottom: 6px; }
    select, input[type="number"], input[type="text"] { width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 10px; font-size: 15px; }
    .row { display: grid; grid-template-columns: 1fr; gap: 10px; }
    @media (min-width: 520px){ .row { grid-template-columns: 1fr 1fr; } }
    .kpi { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 10px; }
    .k { background: #fff; border: 1px solid var(--border); border-radius: 10px; padding: 12px; text-align: center; }
    .k .v { font-weight: 700; font-size: 18px; margin-bottom: 2px; }
    .k .t { font-size: 12px; color: var(--muted); }
    table { width: 100%; border-collapse: collapse; }
    th, td { text-align: right; padding: 10px 8px; border-bottom: 1px solid var(--border); font-variant-numeric: tabular-nums; }
    th:first-child, td:first-child { text-align: left; }
    thead th { font-size: 12px; color: var(--muted); font-weight: 600; }
    tbody tr.best { background: #ecfdf5; }
    .pill { display: inline-block; padding: 2px 8px; font-size: 12px; border-radius: 999px; background: #e5edff; color: #1e40af; border: 1px solid #c7d2fe; }
    .footer { margin-top: 10px; font-size: 12px; color: var(--muted); }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <img alt="Biztalk" src="https://www.biztalk.co.kr/newhome/assets/img/logo/logo.svg" />
      <div class="title">
        <h1>비즈톡 비즈메시지 비용 계산기</h1>
        <p class="desc">요금제와 발송 건수를 입력하면 맞춤 요금제를 추천해드립니다.</p>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>요금제 선택 및 발송건수 입력</h2>
        <div class="row">
          <div>
            <label for="plan">요금제 선택</label>
            <select id="plan">
              <option value="basic">기본</option>
              <option value="flat">정액제(best)</option>
              <option value="premium">프리미엄</option>
              <option value="ultra">울트라(best)</option>
            </select>
          </div>
          <div>
            <label for="volume">예상 발송 건수 (월)</label>
            <input id="volume" type="number" min="0" step="1" value="10000" />
          </div>
        </div>
        <div class="row" style="margin-top:10px;">
          <div>
            <label>부가세(10%)</label>
            <input type="text" value="별도(미포함)" disabled />
          </div>
        </div>
      </div>

      <div class="card">
        <h2>요금제</h2>
        <table>
          <thead>
            <tr>
              <th>요금제</th>
              <th>월 기본료</th>
              <th>무료건수</th>
              <th>건당 단가</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>기본</td><td>10,000원</td><td>0</td><td>8원</td></tr>
            <tr><td>정액제</td><td>49,000원</td><td>7,000</td><td>7원</td></tr>
            <tr><td>프리미엄</td><td>99,000원</td><td>15,000</td><td>6원</td></tr>
            <tr><td>울트라</td><td>150,000원</td><td>0</td><td>5원</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <h2>추천 요금제</h2>
      <div class="kpi" id="kpi">
        <div class="k"><div class="v" id="k_total">-</div><div class="t">총 비용(부가세 제외)</div></div>
      </div>
      <div class="footer">가장 저렴한 요금제에는 <span class="pill">BEST</span> 가 표시됩니다.</div>
      <div style="overflow-x:auto; margin-top:10px;">
        <table id="cmp">
          <thead>
            <tr>
              <th>요금제</th>
              <th>총 비용</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <div class="footer">본 계산기는 안내용이며 실제 청구 금액은 계약 및 정책에 따라 상이할 수 있습니다.</div>
  </div>

  <script>
    const plans = {
      basic:   { name: "기본",     monthly: 10000, free: 0,     unit: 8 },
      flat:    { name: "정액제",   monthly: 49000, free: 7000,  unit: 7 },
      premium: { name: "프리미엄", monthly: 99000, free: 15000, unit: 6 },
      ultra:   { name: "울트라",   monthly: 150000,free: 0,     unit: 5 }
    };

    const el = (id) => document.getElementById(id);
    const fmt = (n) => n.toLocaleString('ko-KR');

    function computeForPlan(planKey, volume) {
      const p = plans[planKey];
      const billable = Math.max(0, volume - p.free);
      const subtotal = p.monthly + billable * p.unit; // VAT 제외
      return { key: planKey, name: p.name, subtotal, billable };
    }

    function recompute() {
      const planKey = el("plan").value;
      const volume  = Math.max(0, parseInt(el("volume").value || "0", 10));

      const results = Object.keys(plans).map(k => computeForPlan(k, volume));
      const minSubtotal = Math.min(...results.map(r => r.subtotal));
      const tbody = document.querySelector("#cmp tbody");
      tbody.innerHTML = "";
      results.sort((a,b)=>a.subtotal-b.subtotal).forEach((r) => {
        const tr = document.createElement("tr");
        if (r.subtotal === minSubtotal) tr.classList.add("best");
        tr.innerHTML = `
          <td>${r.name}${r.subtotal===minSubtotal? ' <span class="pill">BEST</span>':''}</td>
          <td>${fmt(r.subtotal)}원</td>
        `;
        tbody.appendChild(tr);
      });

      const sel = results.find(r => r.key === planKey) || results[0];
      const totalEx = sel.subtotal;
      el("k_total").textContent = fmt(totalEx) + "원";
    }

    ["plan","volume"].forEach(id => {
      el(id).addEventListener("input", recompute);
      el(id).addEventListener("change", recompute);
    });
    window.addEventListener("DOMContentLoaded", recompute);
  </script>
</body>
</html>
